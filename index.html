<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExpenseFlow - Admin Portal</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Login Page -->
        <div id="login-page" class="page active">
            <div class="login-container">
                <div class="login-card">
                    <div class="login-header">
                        <h1><i class="fas fa-receipt"></i> ExpenseFlow</h1>
                        <p>Admin Portal</p>
                    </div>
                    <form id="login-form" class="login-form">
                        <div class="form-group">
                            <label for="email">Email/Username</label>
                            <input type="text" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" name="password" required>
                        </div>
                        <button type="submit" class="login-btn">
                            <i class="fas fa-sign-in-alt"></i> Sign In
                        </button>
                        <div id="login-error" class="error-message"></div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Company Setup Page -->
        <div id="company-setup-page" class="page">
            <div class="setup-container">
                <div class="setup-card">
                    <div class="setup-header">
                        <h1><i class="fas fa-building"></i> Company Setup</h1>
                        <p>Let's set up your organization</p>
                    </div>
                    <form id="company-setup-form" class="setup-form">
                        <div class="form-group">
                            <label for="company-name">Company Name</label>
                            <input type="text" id="company-name" name="companyName" required>
                        </div>
                        <div class="form-group">
                            <label for="country">Country</label>
                            <select id="country" name="country" required>
                                <option value="">Select Country</option>
                                <option value="US">United States</option>
                                <option value="UK">United Kingdom</option>
                                <option value="CA">Canada</option>
                                <option value="AU">Australia</option>
                                <option value="DE">Germany</option>
                                <option value="FR">France</option>
                                <option value="IN">India</option>
                                <option value="JP">Japan</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="currency">Default Currency</label>
                            <select id="currency" name="currency" required>
                                <option value="">Select Currency</option>
                                <option value="USD">USD - US Dollar</option>
                                <option value="EUR">EUR - Euro</option>
                                <option value="GBP">GBP - British Pound</option>
                                <option value="CAD">CAD - Canadian Dollar</option>
                                <option value="AUD">AUD - Australian Dollar</option>
                                <option value="INR">INR - Indian Rupee</option>
                                <option value="JPY">JPY - Japanese Yen</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="admin-name">Your Full Name</label>
                            <input type="text" id="admin-name" name="adminName" required>
                        </div>
                        <button type="submit" class="setup-btn">
                            <i class="fas fa-check"></i> Complete Setup
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="admin-dashboard" class="page">
            <div class="dashboard-container">
                <header class="dashboard-header">
                    <div class="header-left">
                        <h1><i class="fas fa-tachometer-alt"></i> Admin Dashboard</h1>
                        <span class="company-name" id="company-display-name"></span>
                    </div>
                    <div class="header-right">
                        <div class="user-info">
                            <span id="admin-display-name"></span>
                            <button id="logout-btn" class="logout-btn">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                    </div>
                </header>

                <nav class="dashboard-nav">
                    <button class="nav-btn active" data-section="overview">
                        <i class="fas fa-chart-pie"></i> Overview
                    </button>
                    <button class="nav-btn" data-section="users">
                        <i class="fas fa-users"></i> User Management
                    </button>
                    <button class="nav-btn" data-section="categories">
                        <i class="fas fa-tags"></i> Expense Categories
                    </button>
                    <button class="nav-btn" data-section="workflows">
                        <i class="fas fa-sitemap"></i> Workflows
                    </button>
                    <button class="nav-btn" data-section="monitoring">
                        <i class="fas fa-chart-line"></i> Monitoring
                    </button>
                </nav>

                <main class="dashboard-content">
                    <!-- Overview Section -->
                    <div id="overview-section" class="section active">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 id="total-users">0</h3>
                                    <p>Total Users</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-file-invoice-dollar"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 id="total-expenses">$0</h3>
                                    <p>Total Expenses</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 id="pending-approvals">0</h3>
                                    <p>Pending Approvals</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 id="approved-claims">0</h3>
                                    <p>Approved Claims</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- User Management Section -->
                    <div id="users-section" class="section">
                        <div class="section-header">
                            <h2>User Management</h2>
                            <div class="header-actions">
                                <button id="import-users-btn" class="btn btn-secondary">
                                    <i class="fas fa-file-excel"></i> Import Excel
                                </button>
                                <button id="add-user-btn" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Add User
                                </button>
                            </div>
                        </div>
                        <div class="users-table-container">
                            <table class="users-table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Role</th>
                                        <th>Manager</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="users-table-body">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Expense Categories Section -->
                    <div id="categories-section" class="section">
                        <div class="section-header">
                            <h2>Expense Categories</h2>
                            <div class="header-actions">
                                <button id="import-categories-btn" class="btn btn-secondary">
                                    <i class="fas fa-file-excel"></i> Import Excel
                                </button>
                                <button id="add-category-btn" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Add Category
                                </button>
                            </div>
                        </div>
                        <div class="categories-grid" id="categories-grid">
                        </div>
                    </div>

                    <!-- Workflows Section -->
                    <div id="workflows-section" class="section">
                        <div class="section-header">
                            <h2>Approval Workflows</h2>
                            <button id="add-workflow-btn" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Create Workflow
                            </button>
                        </div>
                        <div class="workflows-container" id="workflows-container">
                        </div>
                    </div>

                    <!-- Monitoring Section -->
                    <div id="monitoring-section" class="section">
                        <div class="section-header">
                            <h2>Real-time Monitoring</h2>
                        </div>
                        <div class="monitoring-grid">
                            <div class="chart-container">
                                <h3>Expense Trends</h3>
                                <canvas id="expense-trends-chart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h3>Category Breakdown</h3>
                                <canvas id="category-breakdown-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Add User Modal -->
    <div id="add-user-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New User</h3>
                <span class="close">&times;</span>
            </div>
            <form id="add-user-form" class="modal-form">
                <div class="form-group">
                    <label for="user-name">Full Name</label>
                    <input type="text" id="user-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="user-email">Email</label>
                    <input type="email" id="user-email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="user-role">Role</label>
                    <select id="user-role" name="role" required>
                        <option value="">Select Role</option>
                        <option value="Employee">Employee</option>
                        <option value="Manager">Manager</option>
                        <option value="Admin">Admin</option>
                        <option value="Director">Director</option>
                        <option value="Finance">Finance</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="user-manager">Manager</label>
                    <select id="user-manager" name="manager">
                        <option value="">Select Manager (Optional)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="user-password">Password</label>
                    <input type="password" id="user-password" name="password" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-user">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div id="add-category-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Expense Category</h3>
                <span class="close">&times;</span>
            </div>
            <form id="add-category-form" class="modal-form">
                <div class="form-group">
                    <label for="category-name">Category Name</label>
                    <input type="text" id="category-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="category-description">Description</label>
                    <textarea id="category-description" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="category-color">Color</label>
                    <input type="color" id="category-color" name="color" value="#667eea">
                </div>
                <div class="form-group">
                    <label for="category-image">Category Icon (Image)</label>
                    <input type="file" id="category-image" name="image" accept="image/*">
                    <small class="form-text">Upload an image file for the category icon</small>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-category">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Category</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Category Modal -->
    <div id="edit-category-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Expense Category</h3>
                <span class="close">&times;</span>
            </div>
            <form id="edit-category-form" class="modal-form">
                <input type="hidden" id="edit-category-id" name="id">
                <div class="form-group">
                    <label for="edit-category-name">Category Name</label>
                    <input type="text" id="edit-category-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="edit-category-description">Description</label>
                    <textarea id="edit-category-description" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="edit-category-color">Color</label>
                    <input type="color" id="edit-category-color" name="color">
                </div>
                <div class="form-group">
                    <label for="edit-category-image">Category Icon (Image)</label>
                    <input type="file" id="edit-category-image" name="image" accept="image/*">
                    <small class="form-text">Upload a new image to replace the current icon</small>
                    <div id="current-icon-preview" class="current-icon-preview"></div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-edit-category">Cancel</button>
                    <button type="submit" class="btn btn-primary">Update Category</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Workflow Configuration Modal -->
    <div id="workflow-modal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Configure Workflow</h3>
                <span class="close">&times;</span>
            </div>
            <form id="workflow-form" class="modal-form">
                <div class="form-group">
                    <label for="workflow-name">Workflow Name</label>
                    <input type="text" id="workflow-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="workflow-category">Category</label>
                    <select id="workflow-category" name="category" required>
                        <option value="">Select Category</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="workflow-type">Workflow Type</label>
                    <select id="workflow-type" name="type" required>
                        <option value="">Select Type</option>
                        <option value="sequential">Sequential (Multi-stage)</option>
                        <option value="conditional">Conditional</option>
                        <option value="hybrid">Hybrid</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="threshold-amount">Threshold Amount (Optional)</label>
                    <input type="number" id="threshold-amount" name="threshold" step="0.01" min="0">
                </div>
                <div class="workflow-config" id="workflow-config">
                    <!-- Dynamic workflow configuration will be inserted here -->
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-workflow">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Workflow</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Excel Import Modal for Users -->
    <div id="import-users-modal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Import Users from Excel</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-form">
                <div class="import-instructions">
                    <h4>Excel Format Requirements:</h4>
                    <p>Your Excel file should have the following columns:</p>
                    <ul>
                        <li><strong>Name</strong> - Full name of the user</li>
                        <li><strong>Email</strong> - Email address (must be unique)</li>
                        <li><strong>Role</strong> - Employee, Manager, Admin, Director, or Finance</li>
                        <li><strong>Password</strong> - Initial password</li>
                    </ul>
                    <div class="sample-download">
                        <button type="button" class="btn btn-secondary" id="download-user-template">
                            <i class="fas fa-download"></i> Download Sample Template
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="user-excel-file">Select Excel File</label>
                    <input type="file" id="user-excel-file" accept=".xlsx,.xls" required>
                </div>
                <div id="user-import-preview" class="import-preview" style="display: none;">
                    <h4>Preview Data:</h4>
                    <div class="preview-table-container">
                        <table class="preview-table" id="user-preview-table">
                        </table>
                    </div>
                    <div class="import-actions">
                        <button type="button" class="btn btn-primary" id="confirm-user-import">Import Users</button>
                        <button type="button" class="btn btn-secondary" id="cancel-user-import">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Excel Import Modal for Categories -->
    <div id="import-categories-modal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Import Categories from Excel</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-form">
                <div class="import-instructions">
                    <h4>Excel Format Requirements:</h4>
                    <p>Your Excel file should have the following columns:</p>
                    <ul>
                        <li><strong>Name</strong> - Category name</li>
                        <li><strong>Description</strong> - Category description</li>
                        <li><strong>Color</strong> - Hex color code (e.g., #667eea)</li>
                    </ul>
                    <p><strong>Note:</strong> Category icons can be uploaded as images after import using the edit function.</p>
                    <div class="sample-download">
                        <button type="button" class="btn btn-secondary" id="download-category-template">
                            <i class="fas fa-download"></i> Download Sample Template
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="category-excel-file">Select Excel File</label>
                    <input type="file" id="category-excel-file" accept=".xlsx,.xls" required>
                </div>
                <div id="category-import-preview" class="import-preview" style="display: none;">
                    <h4>Preview Data:</h4>
                    <div class="preview-table-container">
                        <table class="preview-table" id="category-preview-table">
                        </table>
                    </div>
                    <div class="import-actions">
                        <button type="button" class="btn btn-primary" id="confirm-category-import">Import Categories</button>
                        <button type="button" class="btn btn-secondary" id="cancel-category-import">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
